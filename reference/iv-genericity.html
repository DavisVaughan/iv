<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Developer tools for extending iv — iv-genericity • iv</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Developer tools for extending iv — iv-genericity"><meta property="og:description" content="

iv_proxy() is an S3 generic which allows you to write S3 methods for
iv extension types to ensure that they are treated like iv objects. The
input will be your iv extension object, x, and the return value should
be an iv object.
iv_restore() is an S3 generic that dispatches off to that allows you
to restore a proxied iv extension type back to its original type. The
inputs will be a bare iv object, x, and your original iv extension
object, to, and the return value should correspond to x restored to
the type of to, if possible.


You typically don't need to create an iv_proxy() method if your class
directly extends iv through the class argument of new_iv(). You only
need to implement this if your class has a different structure than a
typical iv object. In particular, if vctrs::field(x, &quot;start&quot;) and
vctrs::field(x, &quot;end&quot;) don't return the start and end of the interval
vector respectively, then you probably need an iv_proxy() method.
You typically do need an iv_restore() method for custom iv extensions.
If your class is simple, then you can generally just call your constructor,
like new_my_iv(), to restore the class and any additional attributes that
might be required.
This system allows you to use any iv_*() function on your iv extension
object without having to define S3 methods for all of them."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">iv</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/DavisVaughan/iv/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Developer tools for extending iv</h1>
    <small class="dont-index">Source: <a href="https://github.com/DavisVaughan/iv/blob/HEAD/R/iv.R" class="external-link"><code>R/iv.R</code></a></small>
    <div class="hidden name"><code>iv-genericity.Rd</code></div>
    </div>

    <div class="ref-description">
    
<ul><li><p><code>iv_proxy()</code> is an S3 generic which allows you to write S3 methods for
iv extension types to ensure that they are treated like iv objects. The
input will be your iv extension object, <code>x</code>, and the return value should
be an iv object.</p></li>
<li><p><code>iv_restore()</code> is an S3 generic that dispatches off <code>to</code> that allows you
to restore a proxied iv extension type back to its original type. The
inputs will be a bare iv object, <code>x</code>, and your original iv extension
object, <code>to</code>, and the return value should correspond to <code>x</code> restored to
the type of <code>to</code>, if possible.</p></li>
</ul><p>You typically <em>don't</em> need to create an <code>iv_proxy()</code> method if your class
directly extends iv through the <code>class</code> argument of <code><a href="new_iv.html">new_iv()</a></code>. You only
need to implement this if your class has a different structure than a
typical iv object. In particular, if <code>vctrs::field(x, "start")</code> and
<code>vctrs::field(x, "end")</code> don't return the <code>start</code> and <code>end</code> of the interval
vector respectively, then you probably need an <code>iv_proxy()</code> method.</p>
<p>You typically <em>do</em> need an <code>iv_restore()</code> method for custom iv extensions.
If your class is simple, then you can generally just call your constructor,
like <code>new_my_iv()</code>, to restore the class and any additional attributes that
might be required.</p>
<p>This system allows you to use any <code>iv_*()</code> function on your iv extension
object without having to define S3 methods for all of them.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">iv_proxy</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">iv_restore</span><span class="op">(</span><span class="va">x</span>, <span class="va">to</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p><code>[vector]</code></p>
<p>A vector.</p></dd>
<dt>...</dt>
<dd><p>These dots are for future extensions and must be empty.</p></dd>
<dt>to</dt>
<dd><p><code>[vector]</code></p>
<p>The original vector to restore to.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <ul><li><p><code>iv_proxy()</code> should return an iv object for further manipulation.</p></li>
<li><p><code>iv_restore()</code> should return an object of type <code>to</code>, if possible. In
some cases, it may be required to fall back to returning an iv object.</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://vctrs.r-lib.org/" class="external-link">vctrs</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">new_nested_iv</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">iv</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="va">fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>iv <span class="op">=</span> <span class="va">iv</span><span class="op">)</span></span>
<span class="r-in">  <span class="fu"><a href="https://vctrs.r-lib.org/reference/new_rcrd.html" class="external-link">new_rcrd</a></span><span class="op">(</span><span class="va">fields</span>, class <span class="op">=</span> <span class="st">"nested_iv"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">format.nested_iv</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://vctrs.r-lib.org/reference/fields.html" class="external-link">field</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"iv"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">iv_proxy.nested_iv</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="fu"><a href="https://vctrs.r-lib.org/reference/fields.html" class="external-link">field</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"iv"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">iv_restore.nested_iv</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">to</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="fu">new_nested_iv</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">iv</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_iv.html">new_iv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">new_nested_iv</span><span class="op">(</span><span class="va">iv</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;nested_iv[2]&gt;</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in stop_vctrs("vctrs_error_unimplemented", message = msg, x = x,     method = method):</span> `format.nested_iv()` not implemented.</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Proxies, then accesses the `start` field</span></span>
<span class="r-in"><span class="fu"><a href="iv-accessors.html">iv_start</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in iv_proxy(x):</span> Object `x`, with type &lt;nested_iv&gt;, is not an &lt;iv&gt; and does not implement an `iv_proxy()` method.</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Proxies, computes the complement to generate an iv,</span></span>
<span class="r-in"><span class="co"># then restores to the original type</span></span>
<span class="r-in"><span class="fu"><a href="iv-sets.html">iv_complement</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in iv_proxy(x):</span> Object `x`, with type &lt;nested_iv&gt;, is not an &lt;iv&gt; and does not implement an `iv_proxy()` method.</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Davis Vaughan, RStudio.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

